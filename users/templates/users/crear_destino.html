{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crear Destino</title>

    <!-- Estilos -->
    <link rel="stylesheet" href="{% static 'users/css/home.css' %}">
    <link rel="stylesheet" href="{% static 'users/css/animate.css' %}">
    <link rel="shortcut icon" href="{% static 'users/imagenes/logazo.png' %}">
    <link rel="stylesheet" href="{% static 'users/fontawesome/css/all.min.css' %}">
</head>
<body>

    <header class="menu animate__animated animate__fadeInDown">
        <h1 class="animate__animated animate__bounceInDown">Crear Destino</h1>
        <img src="{% static 'users/imagenes/logazo.png' %}" class="logo animate__animated animate__zoomIn animate__delay-1s" alt="Logo">
        <nav>
            <ul class="nav-list animate__animated animate__fadeInDown">
                <li class="nav-item animate__animated animate__fadeInLeft animate__delay-1s">
                    {% if rol == 'admin' %}
                        <a href="{% url 'home_admin' %}" class="icon-link">
                    {% elif rol == 'empleado' %}
                        <a href="{% url 'home_empleado' %}" class="icon-link">
                    {% endif %}
                        <i class="fas fa-house"></i>
                        <span class="icon-text">Inicio</span>
                    </a>
                </li>
                <li class="nav-item animate__animated animate__fadeInLeft animate__delay-2s">
                    <a href="{% url 'list_destinos' %}" class="icon-link">
                        <i class="fas fa-plane-departure"></i>
                        <span class="icon-text">Gestionar Destinos</span>
                    </a>
                </li>
                <li class="nav-item animate__animated animate__fadeInLeft animate__delay-3s">
                    <a href="{% url 'listar_horarios' %}" class="icon-link">
                        <i class="fa-regular fa-calendar"></i>
                        <span class="icon-text">Gestionar Horarios</span>
                    </a>
                </li>
                {% if rol == 'admin' %}
                <li class="nav-item animate__animated animate__fadeInLeft animate__delay-4s"> 
                    <a href="{% url 'list_users' %}" class="icon-link">
                        <i class="fa-solid fa-users-gear"></i>
                        <span class="icon-text">Manejo de Usuarios</span>
                    </a>
                </li>
                {% endif %}
                <li class="nav-item animate__animated animate__fadeInLeft animate__delay-5s">
                    <a href="{% url 'logout' %}" class="icon-link">
                        <i class="fas fa-door-closed"></i>
                        <span class="icon-text">Cerrar Sesión</span>
                    </a>
                </li>
            </ul>
        </nav>
    </header>

    <main class="page-container">
        <section class="formulario-registro fade-in">
            <div class="form-container">
                <h2>{{ accion }} Destino</h2>

                <form method="POST" enctype="multipart/form-data" class="form-home">
                    {% csrf_token %}
                    
                    <div class="form-group">
                        <label for="id_nombre">Nombre</label>
                        {{ form.nombre }}
                        {% if form.nombre.errors %}
                            <div class="alert alert-danger">
                                {% for error in form.nombre.errors %}
                                    <p>{{ error }}</p>
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                
                    <div class="form-group">
                        <label for="id_descripcion">Descripción</label>
                        {{ form.descripcion }}
                        {% if form.descripcion.errors %}
                            <div class="alert alert-danger">
                                {% for error in form.descripcion.errors %}
                                    <p>{{ error }}</p>
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                
                    <div class="form-group">
                        <label for="id_transporte">Transporte</label>
                        {{ form.transporte }}
                        {% if form.transporte.errors %}
                            <div class="alert alert-danger">
                                {% for error in form.transporte.errors %}
                                    <p>{{ error }}</p>
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                
                    <div class="form-group">
                        <label for="id_boletos_disponibles">Boletos Disponibles</label>
                        {{ form.boletos_disponibles }}
                        {% if form.boletos_disponibles.errors %}
                            <div class="alert alert-danger">
                                {% for error in form.boletos_disponibles.errors %}
                                    <p>{{ error }}</p>
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                    
                    <div class="form-group">
                        <label for="id_precio_general">Precio Boleto General</label>
                        {{ form.precio_general }}
                    </div>

                    <div class="form-group">
                        <label for="id_precio_vip">Precio Boleto VIP</label>
                        {{ form.precio_vip }}
                    </div>
                
                    <div class="form-group">
                        <label for="id_imagen">Imagen</label>
                        {{ form.imagen }}
                    </div>
                
                    <button type="submit" class="btn">Crear destino</button>
                </form>

                <a href="{% url 'list_destinos' %}" class="btn">Ver Destinos</a>
            </div>
        </section>
    </main>

    <footer class="footer-login animate__animated animate__fadeInUp animate__delay-2s">
        <p>&copy; 2025 Agencia de Viajes. Todos los derechos reservados.</p>
    </footer>

    {% if errores %}
    <script type="application/json" id="errores-json">
        {{ errores|safe }}
    </script>
    <script>
        const errores = JSON.parse(document.getElementById("errores-json").textContent);
        Swal.fire({
            title: 'Error al crear destino',
            text: errores.join('\n'),
            icon: 'error',
            confirmButtonText: 'OK'
        });
    </script>
    {% endif %}

    <script src="{% static 'users/js/destino_create.js' %}"></script>
    <script src="{% static 'users/js/sweetalert2.all.min.js' %}"></script>

</body>
</html>
