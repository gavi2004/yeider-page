{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Lista de Horarios</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Estilos -->
    <link rel="stylesheet" href="{% static 'users/css/home.css' %}">
    <link rel="stylesheet" href="{% static 'users/css/animate.css' %}">
    <link rel="shortcut icon" href="{% static 'users/imagenes/logazo.png' %}">
    <link rel="stylesheet" href="{% static 'users/fontawesome/css/all.min.css' %}">
</head>
<body>

    <header class="menu animate__animated animate__fadeInDown">
        <h1 class="animate__animated animate__bounceInDown">Gestion De Horarios</h1>
        <img src="{% static 'users/imagenes/logazo.png' %}" class="logo animate__animated animate__zoomIn animate__delay-1s" alt="Logo">
        <nav>
            <ul class="nav-list animate__animated animate__fadeInDown">
                <li class="nav-item animate__animated animate__fadeInLeft animate__delay-1s">
                    {% if rol == 'admin' %}
                        <a href="{% url 'home_admin' %}" class="icon-link">
                    {% elif rol == 'empleado' %}
                        <a href="{% url 'home_empleado' %}" class="icon-link">
                    {% else %}
                        <a href="#" class="icon-link"> 
                    {% endif %}
                        <i class="fas fa-house"></i>
                        <span class="icon-text">Inicio</span>
                    </a>
                </li>
                <li class="nav-item animate__animated animate__fadeInLeft animate__delay-2s">
                    <a href="{% url 'list_destinos' %}" class="icon-link">
                        <i class="fas fa-plane-departure"></i>
                        <span class="icon-text">Gestionar Destinos</span>
                    </a>
                </li>
                <li class="nav-item animate__animated animate__fadeInLeft animate__delay-3s">
                    <a href="{% url 'listar_horarios' %}" class="icon-link">
                        <i class="fa-regular fa-calendar"></i>
                        <span class="icon-text">Gestionar Horarios</span>
                    </a>
                </li>
                {% if rol == 'admin' %}
                <li class="nav-item animate__animated animate__fadeInLeft animate__delay-4s"> 
                    <a href="{% url 'list_users' %}" class="icon-link">
                        <i class="fa-solid fa-users-gear"></i>
                        <span class="icon-text">Manejo de Usuarios</span>
                    </a>
                </li>
                {% endif %}
                <li class="nav-item animate__animated animate__fadeInLeft animate__delay-5s">
                    <a href="{% url 'logout' %}" class="icon-link">
                        <i class="fas fa-door-closed"></i>
                        <span class="icon-text">Cerrar Sesión</span>
                    </a>
                </li>
            </ul>
        </nav>
    </header>

    <main class="page-container">
        <section class="formulario-registro fade-in">
            <div class="form-container">
                <h2 class="animate__animated animate__fadeIn">Lista de Horarios</h2>

                <table class="styled-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Destino</th>
                            <th>Fecha</th>
                            <th>Hora</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for horario in horarios %}
                        <tr>
                            <td>{{ horario.id }}</td>
                            <td>{{ horario.destino }}</td>
                            <td>{{horario.fecha}}</td>
                            <td>{{horario.hora}}</td>
                            <td>
                                <a href="{% url 'editar_horario' horario.id %}" class="icon-btn animate__animated animate__fadeInLeft" title="Editar">
                                    <i class="fas fa-pen"></i>
                                </a>
                                <form action="{% url 'eliminar_horario' horario.id %}" method="POST" style="display:inline;" onsubmit="return confirmarEliminacion(this)">
                                    {% csrf_token %}
                                    <button type="submit"
                                            class="icon-btn animate__animated animate__fadeInRight"
                                            title="Eliminar"
                                            data-horario-nombre="{{ horario }}">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </form>
                            </td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="3">No hay horarios registrados.</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>

                <a href="{% url 'crear_horario' %}" class="btn">Crear Nuevo Horario</a>
            </div>
        </section>
    </main>

    <footer class="footer-login animate__animated animate__fadeInUp animate__delay-2s">
        <p>&copy; 2025 Sistema Académico. Todos los derechos reservados.</p>
    </footer>

    <script src="{%  static 'users/js/confirm_delete_horario.js' %}"></script>

</body>
</html>
